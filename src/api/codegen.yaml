# schema: ./server/schema.ts
schema: ./src/schema/*.graphql
hooks:
  afterOneFileWrite:
    - prettier --config ../../.prettierrc.json --write
generates:
# Server types
  ./src/_gen/server-types.ts:
    # hooks:
    #   afterOneFileWrite:
    #     - prettier --config ../../.prettierrc.json --write
    config:
      scalars:
        DateTime: ./my-models#ValidDate
      defaultMapper: any
      typesPrefix: GQL
      enumPrefix: false
      immutableTypes: true
      skipTypename: true
      avoidOptionals: true
      showUnusedMappers: true
      noSchemaStitching: true
      useIndexSignature: true
      contextType: ../schema/context#Context
      mappers:
        DateTime: ./my-models#ValidDate
        TrimmedNonEmptyString: ./my-models#Collections#User
    plugins:
      - typescript
      - typescript-resolvers

## Client Types

  ./src/_gen/client-types-react-apollo.tsx:
    config:
      immutableTypes: true
      skipTypename: true
      withComponent: false
      withHOC: false
      withHooks: true
    documents: ../frontend-shared/src/gql-queries/*.ts
    plugins:
      - add: /* eslint-disable */
      - typescript
      - typescript-operations
      - typescript-react-apollo

  ./src/_gen/client-types-react-urql.tsx:
    config:
      immutableTypes: true
      skipTypename: true
      withComponent: false
      # withHOC: false
      withHooks: true
    documents: ../frontend-shared/src/gql-queries/*.ts
    plugins:
      - add: /* eslint-disable */
      - typescript
      - typescript-operations
      - typescript-urql


  ./src/_gen/client-types-graphql-request.ts:
    config:
      immutableTypes: true
      skipTypename: true
    documents: ../frontend-shared/src/gql-queries/*.ts
    plugins:
      - add: /* eslint-disable */
      - typescript
      - typescript-operations
      - typescript-graphql-request
